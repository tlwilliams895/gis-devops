<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="X-UA-Compatible" content="IE=Edge" />
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>Display Report Data via a Hard Coded Date &#8212; LaunchCode: GIS DevOps  documentation</title>
    <link rel="stylesheet" href="../../_static/bootstrap-sphinx.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" type="text/css" href="../../_static/fa/css/all.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/css/launchcode.css" />
    <script type="text/javascript" id="documentation_options" data-url_root="../../" src="../../_static/documentation_options.js"></script>
    <script type="text/javascript" src="../../_static/jquery.js"></script>
    <script type="text/javascript" src="../../_static/underscore.js"></script>
    <script type="text/javascript" src="../../_static/doctools.js"></script>
    <script type="text/javascript" src="../../_static/language_data.js"></script>
    <script type="text/javascript" src="../../_static/js/jquery-1.11.0.min.js"></script>
    <script type="text/javascript" src="../../_static/js/jquery-fix.js"></script>
    <script type="text/javascript" src="../../_static/bootstrap-3.3.7/js/bootstrap.min.js"></script>
    <script type="text/javascript" src="../../_static/bootstrap-sphinx.js"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
<meta charset='utf-8'>
<meta http-equiv='X-UA-Compatible' content='IE=edge,chrome=1'>
<meta name='viewport' content='width=device-width, initial-scale=1.0, maximum-scale=1'>
<meta name="apple-mobile-web-app-capable" content="yes">

  </head><body>

  <div id="navbar" class="navbar navbar-default navbar-fixed-top">
    <div class="container">
      <div class="navbar-header">
        <!-- .btn-navbar is used as the toggle for collapsed navbar content -->
        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".nav-collapse">
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
        <a class="navbar-brand" href="../../index.html"><span><img src="../../_static/lc-ed-logo.png" alt="LaunchCode logo"></span>
          GIS DevOps</a>
        <span class="navbar-text navbar-version pull-left"><b></b></span>
      </div>

        <div class="collapse navbar-collapse nav-collapse">
          <ul class="nav navbar-nav">
            
                <li><a href="/installations/index.html">Installations</a></li>
            
            
              <li class="dropdown globaltoc-container">
  <a role="button"
     id="dLabelGlobalToc"
     data-toggle="dropdown"
     data-target="#"
     href="../../index.html">Pages <b class="caret"></b></a>
  <ul class="dropdown-menu globaltoc"
      role="menu"
      aria-labelledby="dLabelGlobalToc"><ol>
<li class="toctree-l1"><a class="reference internal" href="../../week01/day1/index.html">Week 1 - Day 1: Welcome, Setup</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../week01/day2/index.html">Week 1 - Day 2: Terminal, Shell, Git</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../week01/day3/index.html">Week 1 - Day 3: Shell, Git, SQL</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../week01/day4/index.html">Week 1 - Day 4: SQL, HTTP</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../week01/day5/index.html">Week 1 - Day 5: HTTP, Docker</a></li>
</ol>
<ol>
<li class="toctree-l1"><a class="reference internal" href="../../week02/day1/index.html">Week 2 - Day 1: HTML, CSS, Browser DevTools</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../week02/day2/index.html">Week 2 - Day 2: HTML/CSS Template, JavaScript Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../week02/day3/index.html">Week 2 - Day 3: Programming Fundamentals, JavaScript, DOM</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../week02/day4/index.html">Week 2 - Day 4: JS, DOM, Promises, AJAX</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../week02/day5/index.html">Week 2 - Day 5: Promises, AJAX, HTTP</a></li>
</ol>
<ol>
<li class="toctree-l1"><a class="reference internal" href="../../week03/day1/index.html">Week 3 - Day 1: Java, OOP</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../week03/day2/index.html">Week 3 - Day 2: Spring Boot, Controllers, Routes</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../week03/day3/index.html">Week 3 - Day 3: Models, ORM (Hibernate)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../week03/day4/index.html">Week 3 - Day 4: Persistence, ORM Relationships</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../week03/day5/index.html">Week 3 - Day 5: Review</a></li>
</ol>
<ol>
<li class="toctree-l1"><a class="reference internal" href="../../week04/day1/index.html">Week 4 - Day 1: Git, GitLab, IntelliJ, Refactoring, Unit Testing</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../week04/day2/index.html">Week 4 - Day 2: Security, Test-driven development</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../week04/day3/index.html">Week 4 - Day 3: Integration testing, dependency injection</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../week04/day4/index.html">Week 4 - Day 4: Postgres, Spring Data, JPA, Hibernate</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../week04/day5/index.html">Week 4 - Day 5: AJAX, Open Layers</a></li>
</ol>
<ol>
<li class="toctree-l1"><a class="reference internal" href="../../week05/project/index.html">Week 5 - Project Week: Zika Mission Control</a></li>
</ol>
<ol>
<li class="toctree-l1"><a class="reference internal" href="../../week06/day1/index.html">Week 6 - Day 1: RESTful web services</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../week06/day2/index.html">Week 6 - Day 2: Swagger REST framework</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../week06/day3/index.html">Week 6 - Day 3: Intro to Elasticsearch</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../week06/day4/index.html">Week 6 - Day 4: More Elasticsearch, Integrating ES with Spring</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../week06/day5/index.html">Week 6 - Day 5: ES2015, ESLint, OpenLayers</a></li>
</ol>
<ol>
<li class="toctree-l1"><a class="reference internal" href="../project/index.html">Week 7 - Project Week: Zika Mission Control Part 2</a></li>
</ol>
<ol>
<li class="toctree-l1"><a class="reference internal" href="../../week08/day1/index.html">Week 8 - Day 1: Intro to DevOps/AWS</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../week08/day2/index.html">Week 8 - Day 2: More with AWS</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../week08/day3/index.html">Week 8 - Day 3: 12 Factor Apps and Auto Scaling</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../week08/day4/index.html">Week 8 - Day 4: Gradle, Continuous Integration</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../week08/day5/index.html">Week 8 - Day 5: Sonarqube</a></li>
</ol>
<ol>
<li class="toctree-l1"><a class="reference internal" href="../../week09/project/index.html">Week 9 - Project Week: Zika Mission Control Part 3</a></li>
</ol>
<ol>
<li class="toctree-l1"><a class="reference internal" href="../../week11/project/index.html">Week 11 - Project Week: Zika Mission Control Part 4</a></li>
</ol>
<ol>
<li class="toctree-l1"><a class="reference internal" href="../../week12/day3/index.html">Week 12 - Day 3: Intro to Docker</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../week12/day4/index.html">Week 12 - Day 4: OAuth 2.0</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../week12/day5/index.html">Week 12 - Day 5: Certificates</a></li>
</ol>
<ol>
<li class="toctree-l1"><a class="reference internal" href="../../walkthroughs/aws-intro/index.html">Walkthrough: Intro to AWS</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../walkthroughs/aws-rds-vpc/index.html">Walkthrough: Introduction to Amazon Web Services</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../walkthroughs/certificate-authority/index.html">Certificate Authority</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../walkthroughs/client-certificates/index.html">Client Certificates</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../walkthroughs/docker/index.html">Walkthrough: Intro to Docker</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../walkthroughs/elasticsearch-spring/index.html">Walkthrough: Elasticsearch in Spring</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../walkthroughs/elasticsearch/index.html">Walkthrough: Elasticsearch</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../walkthroughs/elasticsearch2/index.html">Walkthrough: Elasticsearch Part 2</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../walkthroughs/eslint-airwaze/index.html">Walkthrough: ESLint Airwaze</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../walkthroughs/gitLab/index.html">Walkthrough: Git and Gitlab</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../walkthroughs/gradle/index.html">Walkthrough: Gradle</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../walkthroughs/hashing-salting/index.html">Walkthrough: Hashing and Salting Passwords</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../walkthroughs/jenkins/index.html">Walkthrough: CI/CD With Jenkins</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../walkthroughs/launchcart-rest/index.html">Walkthrough: LaunchCart REST</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../walkthroughs/oauth2/index.html">Visual OAuth</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../walkthroughs/openlayers/index.html">Walkthrough: OpenLayers and jQuery</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../walkthroughs/postgress/index.html">Walkthrough: PostgreSQL</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../walkthroughs/sonarqube/index.html">Walkthrough: Sonarqube</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../walkthroughs/spring-data-jpa-hibernate/index.html">Walkthrough: Cars Demo - Spring Data, JPA, Hibernate</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../walkthroughs/spring-integration-testing/index.html">Walkthrough: Spring Integration Tests</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../walkthroughs/swagger/index.html">Walkthrough: SwaggerUI</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../walkthroughs/tdd/index.html">Walkthrough: TDD</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../walkthroughs/unit-tests/index.html">Walkthrough: Unit Tests</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../walkthroughs/upgrading-spring-boot/index.html">Walkthrough: Upgrading to Spring Boot 2.x</a></li>
</ol>
<ol>
<li class="toctree-l1"><a class="reference internal" href="../../installations/00-prep-week/index.html">Installation: Essential Tooling &amp; Configuration</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../installations/01-docker/index.html">Installation: Docker</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../installations/02-docker-psql/index.html">Installation: Docker PSQL Container</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../installations/03-docker-postgis/index.html">Installation: Docker PostGIS</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../installations/04-docker-elasticsearch/index.html">Installation: Docker Elasticsearch</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../installations/05-docker-kibana/index.html">Installation: Docker Kibana</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../installations/06-docker-jenkins/index.html">Installation: Docker Jenkins</a></li>
</ol>
<ol>
<li class="toctree-l1"><a class="reference internal" href="../../configurations/00-intellij/index.html">Configuration: IntelliJ</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../configurations/01-runtime-configurations/index.html">Configuration: IntelliJ - Runtime Configuration</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../configurations/02-environment-variables-intellij/index.html">Configuration: Environment Variables - IntelliJ</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../configurations/04-spring-elasticsearch/index.html">Configuration: Spring &amp; Elasticsearch</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../configurations/05-spring-postgres/index.html">Configuration: Spring &amp; Postgres</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../configurations/06-vscode-eslint/index.html">Configuration: Visual Studio Code - ESLint</a></li>
</ol>
<ol>
<li class="toctree-l1"><a class="reference internal" href="../../notes/docker/index.html">Docker</a></li>
</ol>
</ul>
</li>
              
            
            
            
            
            
          </ul>

          
            
<form class="navbar-form navbar-right" action="../../search.html" method="get">
 <div class="form-group">
    <label for="q" class="searchLabel">Search</label>
    <input type="text" name="q" class="form-control" />
 </div>
  <input type="hidden" name="check_keywords" value="yes" />
  <input type="hidden" name="area" value="default" />
</form>
          
        </div>
    </div>
  </div>

<div class="container">
  <div class="row">
      <div class="col-md-3">
        <div id="sidebar" class="bs-sidenav" role="complementary"><ul>
<li><a class="reference internal" href="#">Display Report Data via a Hard Coded Date</a><ul>
<li><a class="reference internal" href="#create-reportrestcontrollertests-java">Create <code class="docutils literal notranslate"><span class="pre">ReportRestControllerTests.java</span></code></a></li>
<li><a class="reference internal" href="#amend-reportrepository-java">Amend <code class="docutils literal notranslate"><span class="pre">ReportRepository.java</span></code></a></li>
<li><a class="reference internal" href="#create-locationrepository-java">Create <code class="docutils literal notranslate"><span class="pre">LocationRepository.java</span></code></a></li>
<li><a class="reference internal" href="#create-reportrestcontroller-java">Create <code class="docutils literal notranslate"><span class="pre">ReportRestController.java</span></code></a></li>
<li><a class="reference internal" href="#amend-script-js">Amend <code class="docutils literal notranslate"><span class="pre">script.js</span></code></a></li>
</ul>
</li>
</ul>

        </div>
      </div>
    <div class="col-md-9 content">
      
  <div class="section" id="display-report-data-via-a-hard-coded-date">
<span id="week4-report-via-hard-coded-date"></span><h1>Display Report Data via a Hard Coded Date<a class="headerlink" href="#display-report-data-via-a-hard-coded-date" title="Permalink to this headline">¶</a></h1>
<p>Now that we have updated our project to work with our new code, let’s get our map back to displaying data. It’s currently a mess.</p>
<p>Our map still loads, but it’s making a request to <code class="docutils literal notranslate"><span class="pre">/report</span></code> and that controller goes to our report database, and tries to load everything into a Feature Collection (GeoJSON) to load as a new report layer.</p>
<p>Now that our data has changed by separating our report data, and location data, we will need some way to join the data together before it becomes a Feature Collection (GeoJSON).</p>
<p>On top of that, we have a new feature request from our stakeholders to display reports based on time. We are going to need a way to load reports based on one date, instead of loading all the data at once.</p>
<p>REST to the Rescue!</p>
<p>We are going to create a new ReSTful endpoint the user can make a request to including the date as a query parameter. We will load all reports that match our string_date query parameter, join the location data to the reports, and then return a shiny new Feature Collection (GeoJSON) that our map can understand!</p>
<dl class="docutils">
<dt>It’s going to take a little work, so let’s break down our tasks:</dt>
<dd><ul class="first last simple">
<li>Create a <code class="docutils literal notranslate"><span class="pre">ReportRestControllerTests.java</span></code> file</li>
<li>Create a <code class="docutils literal notranslate"><span class="pre">ReportRestController.java</span></code> file</li>
<li>Amend <code class="docutils literal notranslate"><span class="pre">ReportRepository.java</span></code></li>
<li>Amend <code class="docutils literal notranslate"><span class="pre">script.js</span></code></li>
</ul>
</dd>
</dl>
<div class="section" id="create-reportrestcontrollertests-java">
<h2>Create <code class="docutils literal notranslate"><span class="pre">ReportRestControllerTests.java</span></code><a class="headerlink" href="#create-reportrestcontrollertests-java" title="Permalink to this headline">¶</a></h2>
<p>Following TDD is something we try to do in this class. Let’s write our test for our new controller first.</p>
<p>Create a new file in your tests directory called <code class="docutils literal notranslate"><span class="pre">ReportRestControllerTests.java</span></code>.</p>
<p>We haven’t defined what endpoint, but will need one for our test file. Following ReST principles the endpoint should be descriptive. <code class="docutils literal notranslate"><span class="pre">/api/reports</span></code> is a good choice, just remember that your endpoint must be unique in order for Spring to register it correctly. We also need to pass in a string date as a search parameter.</p>
<p>This file should at least test for an HTTP Response status of 200, but seeing as we are testing a Rest Controller we should also test the JSON included with the HTTP Response.</p>
<p>Take some time to really consider what goes in this test. What should be returned from our RestController when a user makes a request with the parameter: <code class="docutils literal notranslate"><span class="pre">?date=2016-03-05</span></code>? What should be returned? How do we check for that in our test file?</p>
<p>To expand your test coverage, what should be returned when the user requests a date that doesn’t have report data: <code class="docutils literal notranslate"><span class="pre">?date=1802-15-36</span></code>?</p>
<p>For assistance look over <a class="reference internal" href="../../walkthroughs/launchcart-rest/index.html#walkthrough-launchcart-rest"><span class="std std-ref">Walkthrough: LaunchCart REST</span></a>. Use this walkthrough to guide the tests you are writing for you RestController.</p>
</div>
<div class="section" id="amend-reportrepository-java">
<h2>Amend <code class="docutils literal notranslate"><span class="pre">ReportRepository.java</span></code><a class="headerlink" href="#amend-reportrepository-java" title="Permalink to this headline">¶</a></h2>
<p>Our JpaRepository classes give us CRUD functionality over our PostGIS database. We created a <code class="docutils literal notranslate"><span class="pre">ReportRepository.java</span></code> class last project week, to get reports from our database.</p>
<p>We changed our underlying data, but our current <code class="docutils literal notranslate"><span class="pre">ReportRepository.java</span></code> class still works. However, we need to extend the functionality of this class. We need to only fetch records that match a specfic string date.</p>
<p>You will need to add a method to this class to allow for this new functionality.</p>
<p>Look over the <a class="reference external" href="https://gitlab.com/LaunchCodeTraining/launchcart/blob/rest-walkthrough-solution/src/main/java/org/launchcode/launchcart/data/ItemRepository.java" target="_blank">ItemRepository.java class<i class="fas fa-external-link-alt" aria-hidden="true"></i></a> from the LaunchCart application we worked on earlier this week for assistance.</p>
</div>
<div class="section" id="create-locationrepository-java">
<h2>Create <code class="docutils literal notranslate"><span class="pre">LocationRepository.java</span></code><a class="headerlink" href="#create-locationrepository-java" title="Permalink to this headline">¶</a></h2>
<p>Another difference this week is that we have separated our report, and location data. Before we could simply create a new FeatureCollection (GeoJSON) from our report data because it included the location data. Now we are going to have to manually join these things together.</p>
<p>To do this we are going to need a new JpaRepository attached to the location table of our database. You can do this by creating <code class="docutils literal notranslate"><span class="pre">LocationRepository.java</span></code>. Model it after your <code class="docutils literal notranslate"><span class="pre">ReportRepository.java</span></code> class.</p>
<p>We are going to need to extend the functionality of this class, to find locations based on something from our report data. If you aren’t sure yet on how to do that, feel free to move on and re-address it when you need it in the next section.</p>
<div class="admonition">
<p class="first admonition-title"><i class="fas fa-sticky-note" aria-hidden="true"></i>Note</p>
<p class="last">We are creating a new JpaRepository, and creating a custom method. This is something we should test. Don’t forget to create a new test file for this repository. It may be difficult to create the test if you are still piecing together how this objective works. So feel free to come back to the test later if you need too.</p>
</div>
</div>
<div class="section" id="create-reportrestcontroller-java">
<h2>Create <code class="docutils literal notranslate"><span class="pre">ReportRestController.java</span></code><a class="headerlink" href="#create-reportrestcontroller-java" title="Permalink to this headline">¶</a></h2>
<p>Now that we have defined what HTTP Reponse should be returned when a users makes an HTTP Request to our ReSTful endpoint. We can write the code for our controller.</p>
<p>You may have an idea of what you need to do in your controller, if so go for it! If you are struggling look over <a class="reference internal" href="../../walkthroughs/launchcart-rest/index.html#walkthrough-launchcart-rest"><span class="std std-ref">Walkthrough: LaunchCart REST</span></a> and your solution to <a class="reference internal" href="../../studios/launchcart-rest/index.html#launchcart-rest-studio"><span class="std std-ref">Studio: LaunchCart REST</span></a>.</p>
<dl class="docutils">
<dt>As a reference to check your work make sure that you:</dt>
<dd><ul class="first last simple">
<li>Create a new file: <code class="docutils literal notranslate"><span class="pre">ReportRestController.java</span></code></li>
<li>Use the <code class="docutils literal notranslate"><span class="pre">&#64;RestController</span></code> annotation</li>
<li>Create a new endpoint handler for our request</li>
<li>Parse any query parameters</li>
<li>Get data from the database using ReportRepository and LocationRepository</li>
<li>Join the report data, and location data together in a Feature</li>
<li>Add the Feature to the FeatureCollection</li>
<li>Return the FeatureCollection</li>
</ul>
</dd>
</dl>
</div>
<div class="section" id="amend-script-js">
<h2>Amend <code class="docutils literal notranslate"><span class="pre">script.js</span></code><a class="headerlink" href="#amend-script-js" title="Permalink to this headline">¶</a></h2>
<p>Now that we have an endpoint ready to serve GeoJSON we can change our <code class="docutils literal notranslate"><span class="pre">script.js</span></code> file.</p>
<p>Last project week we were building a new report layer by making a request to an endpoint. We will need to update this request to use the new endpoint we just defined!</p>
<p>Make sure to include a query parameter in your request. We recommend using <code class="docutils literal notranslate"><span class="pre">2016-03-05</span></code> to test your data. However, you should also look into the report data and pick some other dates to manually test.</p>
<p>Congrats on finishing this step. We had to make a lot of changes to get this far.</p>
<p>Our web application is now handling requests that include dates. We still need to provide a way for users to change the dates to explore the data and will get to that in our next objective!</p>
</div>
</div>


    </div>
      
  </div>
</div>
<footer class="footer">
  <div class="container">
    <p class="pull-right">
      <a href="#">Back to top</a>
      
        <br/>
        
      
    </p>
    <p>
    </p>
  </div>
</footer>
  </body>
</html>